{% extends "base.html" %}

{% load thumbnail %}
{% load tag_colors %}
{% load favorit %}

{% block title %}{{ page.record_id }}/{{ pattern.id }}{% endblock %}
{% block bodyclass %}pattern-detail{% endblock %}

{% block content %}
<div id="pattern-detail">

  <div>
    <img src="{{ pattern.image.url }}">
  </div>
  {% fav_button pattern.id %}

  <div class="tags-editable">
    <span class="tags">
      {% for tag in tags %}
        {{ tag.name|as_taga }}
      {% endfor %}
    </span>

    <div class="tag-add-form" data-action="{% url 'add_tag' pattern.id %}">
      <input type="text" class="tag-add-input">
      <button class="tag-add-button">add</button>
    </div>
  </div>

  
  <div>
    {% for vector in vectors %}
      <div>
        <img src="{{ vector.file.url }}">
        <div class="vector-rating" data-action="{% url 'rate_vector' vector.id %}" data-score="{{ vector.rating }}"></div>
      </div>
    {% endfor %}
  </div>


<div class="volume-title">
    <div class="volume-title-generic">Collection</div>
    <div class="volume-title-name">{{ pattern.page.volume.category.name }} | {{ pattern.page.volume.record_id }} |</div>
</div>

    {% if not user.is_anonymous %}
    <div class="upload-field">
        <p>UPLOAD</p>
        <form action="{% url 'pattern_detail' pattern.id %}" method="post" enctype="multipart/form-data">
            {% csrf_token %}
            <p>{{ form.non_field_errors }}</p>
            <p>{{ form.vectorfile.label_tag }} {{ form.vectorfile.help_text }}</p>
            <p>
                {{ form.vectorfile.errors }}
                {{ form.vectorfile }}
            </p>
            <p><input type="submit" value="Upload" /></p>
        </form>
        <p>Upload your own PATTERN!</p>
    </div>
    {% endif %}


</div>
{% endblock %}

